# DiabEat AI é…ç½®è¯´æ˜

## ğŸ”‘ é€šä¹‰åƒé—® API Key

### é€šä¹‰åƒé—® API Key é…ç½®

é€šä¹‰åƒé—® API Key ç”¨äºé£Ÿç‰©å›¾åƒè¯†åˆ«åŠŸèƒ½ã€‚

#### æ–¹å¼ 1ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```bash
export DASHSCOPE_API_KEY="your-dashscope-api-key"
```

#### æ–¹å¼ 2ï¼šåœ¨ .env æ–‡ä»¶ä¸­é…ç½®

ç¼–è¾‘ `diabeat-server/config/.env`ï¼š

```env
DASHSCOPE_API_KEY=your-dashscope-api-key
```

### è·å–æ–°çš„ API Keyï¼ˆå¦‚æœæ²¡æœ‰ï¼‰

1. è®¿é—® [é˜¿é‡Œäº‘ DashScope](https://dashscope.console.aliyun.com/)
2. ç™»å½•é˜¿é‡Œäº‘è´¦å·
3. è¿›å…¥ **API-KEY ç®¡ç†**
4. åˆ›å»ºæ–°çš„ API Key
5. é…ç½®åˆ° rock-server å’Œ diabeat-server

---

## ğŸ”” Firebase Cloud Messaging (FCM) é…ç½®

### éœ€è¦ä»€ä¹ˆ

1. **Firebase é¡¹ç›®**
   - Firebase é¡¹ç›® ID
   - æœåŠ¡è´¦å·ç§é’¥ JSON æ–‡ä»¶

2. **Android åº”ç”¨é…ç½®**
   - åº”ç”¨åŒ…åï¼š`com.diabeat`
   - `google-services.json` æ–‡ä»¶

### é…ç½®æ­¥éª¤

#### æœåŠ¡å™¨ç«¯

1. **è·å–æœåŠ¡è´¦å·å¯†é’¥**
   - è®¿é—® [Firebase Console](https://console.firebase.google.com/)
   - é¡¹ç›®è®¾ç½® â†’ æœåŠ¡è´¦å· â†’ ç”Ÿæˆæ–°çš„ç§é’¥
   - ä¸‹è½½ JSON æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼š`diabeat-firebase-adminsdk-xxxxx.json`ï¼‰

2. **é…ç½®åˆ°æœåŠ¡å™¨**

```bash
# æ–¹å¼1: ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰
export GOOGLE_APPLICATION_CREDENTIALS="/path/to/diabeat-firebase-adminsdk.json"

# æ–¹å¼2: åœ¨ .env æ–‡ä»¶ä¸­
FIREBASE_CREDENTIALS_PATH=/path/to/diabeat-firebase-adminsdk.json
```

3. **å®‰è£…ä¾èµ–**
```bash
pip install firebase-admin
```

#### Android å®¢æˆ·ç«¯

1. **æ·»åŠ  Android åº”ç”¨**
   - åœ¨ Firebase Console ä¸­ï¼Œæ·»åŠ  Android åº”ç”¨
   - åŒ…åï¼š`com.diabeat`
   - ä¸‹è½½ `google-services.json`

2. **æ”¾ç½®æ–‡ä»¶**
   - å°† `google-services.json` æ”¾åˆ° `diabeat-android/app/` ç›®å½•

3. **é…ç½®æƒé™**
   - å·²åœ¨ `AndroidManifest.xml` ä¸­é…ç½®

### è¯¦ç»†æ–‡æ¡£

å‚è€ƒï¼š[docs/FCM_SETUP.md](./docs/FCM_SETUP.md)

---

## â˜ï¸ AWS S3 å­˜å‚¨é…ç½®

### éœ€è¦ä»€ä¹ˆ

1. **AWS è´¦æˆ·**
   - AWS è´¦æˆ· ID
   - Access Key ID
   - Secret Access Key

2. **S3 å­˜å‚¨æ¡¶**
   - å­˜å‚¨æ¡¶åç§°ï¼ˆå¿…é¡»å…¨å±€å”¯ä¸€ï¼‰
   - AWS åŒºåŸŸï¼ˆä¾‹å¦‚ï¼š`ap-southeast-1`ï¼‰

### é…ç½®æ­¥éª¤

#### 1. åˆ›å»º S3 å­˜å‚¨æ¡¶

1. ç™»å½• [AWS Console](https://console.aws.amazon.com/)
2. è¿›å…¥ **S3** æœåŠ¡
3. åˆ›å»ºå­˜å‚¨æ¡¶ï¼š
   - åç§°ï¼šä¾‹å¦‚ `diabeat-ai-images`ï¼ˆå¿…é¡»å…¨å±€å”¯ä¸€ï¼‰
   - åŒºåŸŸï¼šé€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„åŒºåŸŸ

#### 2. åˆ›å»º IAM ç”¨æˆ·å’Œè®¿é—®å¯†é’¥

1. è¿›å…¥ **IAM** æœåŠ¡
2. åˆ›å»ºç”¨æˆ·ï¼š`diabeat-s3-user`
3. é™„åŠ ç­–ç•¥ï¼ˆå…è®¸ S3 æ“ä½œï¼‰ï¼š
   ```json
   {
       "Version": "2012-10-17",
       "Statement": [
           {
               "Effect": "Allow",
               "Action": [
                   "s3:PutObject",
                   "s3:GetObject",
                   "s3:DeleteObject",
                   "s3:ListBucket"
               ],
               "Resource": [
                   "arn:aws:s3:::diabeat-ai-images",
                   "arn:aws:s3:::diabeat-ai-images/*"
               ]
           }
       ]
   }
   ```
4. åˆ›å»ºè®¿é—®å¯†é’¥ï¼Œä¿å­˜ **Access Key ID** å’Œ **Secret Access Key**

#### 3. é…ç½®åˆ°æœåŠ¡å™¨

```bash
# åœ¨ .env æ–‡ä»¶ä¸­é…ç½®
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=ap-southeast-1
AWS_S3_BUCKET=diabeat-ai-images
S3_URL=https://diabeat-ai-images.s3.ap-southeast-1.amazonaws.com
```

#### 4. å®‰è£…ä¾èµ–

```bash
pip install boto3
```

### è¯¦ç»†æ–‡æ¡£

å‚è€ƒï¼š[docs/AWS_S3_SETUP.md](./docs/AWS_S3_SETUP.md)

---

## ğŸ“ å®Œæ•´é…ç½®ç¤ºä¾‹

### config/.env æ–‡ä»¶

```env
# ============================================
# å¿…éœ€é…ç½®
# ============================================

# æ•°æ®åº“
DATABASE_URL=postgresql://user:password@localhost:5432/diabeat

# JWTï¼ˆå¿…é¡»ä¿®æ”¹é»˜è®¤å€¼ï¼‰
SECRET_KEY=your-secret-key-change-in-production

# AI APIï¼ˆè‡³å°‘é…ç½®ä¸€ä¸ªï¼‰
OPENAI_API_KEY=your-openai-key
DASHSCOPE_API_KEY=your-dashscope-api-key

# ============================================
# å¯é€‰é…ç½®
# ============================================

# Firebase FCMï¼ˆå¯é€‰ï¼‰
FIREBASE_CREDENTIALS_PATH=/path/to/diabeat-firebase-adminsdk.json
# æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡
# export GOOGLE_APPLICATION_CREDENTIALS="/path/to/diabeat-firebase-adminsdk.json"

# AWS S3ï¼ˆå¯é€‰ï¼‰
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=ap-southeast-1
AWS_S3_BUCKET=diabeat-ai-images
S3_URL=https://diabeat-ai-images.s3.ap-southeast-1.amazonaws.com
```

---

## ğŸ” é…ç½®éªŒè¯

### æ£€æŸ¥é…ç½®

```python
# test_config.py
from app.config import settings

print("=== é…ç½®æ£€æŸ¥ ===")
print(f"æ•°æ®åº“: {'âœ“' if settings.DATABASE_URL else 'âœ—'}")
print(f"JWTå¯†é’¥: {'âœ“' if settings.SECRET_KEY != 'your-secret-key-change-in-production' else 'âš  ä½¿ç”¨é»˜è®¤å€¼'}")
print(f"OpenAI: {'âœ“' if settings.OPENAI_API_KEY else 'âœ—'}")
print(f"é€šä¹‰åƒé—®: {'âœ“' if settings.DASHSCOPE_API_KEY else 'âœ—'}")
print(f"Firebase: {'âœ“' if settings.FIREBASE_CREDENTIALS_PATH or os.getenv('GOOGLE_APPLICATION_CREDENTIALS') else 'âœ— (å¯é€‰)'}")
print(f"AWS S3: {'âœ“' if settings.AWS_S3_BUCKET else 'âœ— (å¯é€‰)'}")
```

è¿è¡Œï¼š
```bash
python test_config.py
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´é…ç½®æŒ‡å—](./docs/CONFIGURATION_GUIDE.md)
- [FCM è¯¦ç»†é…ç½®](./docs/FCM_SETUP.md)
- [AWS S3 è¯¦ç»†é…ç½®](./docs/AWS_S3_SETUP.md)
- [å¿«é€Ÿå¼€å§‹](./docs/QUICK_START.md)

---

**æœ€åæ›´æ–°**ï¼š2025-11-06

