# DiabEat AI é…ç½®éœ€æ±‚æ€»ç»“

## ğŸ”‘ é€šä¹‰åƒé—® API Key - ä» rock-server è·å–

### è¯´æ˜
é€šä¹‰åƒé—®çš„ API Key **ä¸ rock-server å…±äº«**ï¼Œä½¿ç”¨ç›¸åŒçš„ keyã€‚

### è·å–æ–¹å¼

#### æ–¹å¼ 1ï¼šæŸ¥çœ‹ rock-server é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰

```bash
# æŸ¥çœ‹ rock-server çš„é…ç½®
cat /Users/conalin/rock-server/config/.env.stage | grep DASHSCOPE_API_KEY
```

#### æ–¹å¼ 2ï¼šæŸ¥çœ‹ç¯å¢ƒå˜é‡

```bash
# å¦‚æœ rock-server å·²ç»è®¾ç½®äº†ç¯å¢ƒå˜é‡
echo $DASHSCOPE_API_KEY
```

#### æ–¹å¼ 3ï¼šåœ¨ rock-server ä»£ç ä¸­æŸ¥æ‰¾

rock-server ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¯»å–ï¼š
- ç¯å¢ƒå˜é‡ï¼š`DASHSCOPE_API_KEY`
- é…ç½®æ–‡ä»¶ï¼š`config/.env.stage`

### é…ç½®åˆ° diabeat-server

**åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®**ï¼š

```env
# ä» rock-server å¤åˆ¶ç›¸åŒçš„ key
DASHSCOPE_API_KEY=your-dashscope-api-key-from-rock-server
```

**æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡**ï¼š

```bash
export DASHSCOPE_API_KEY="ä»rock-serverå¤åˆ¶çš„key"
```

---

## ğŸ”” Firebase Cloud Messaging (FCM) - éœ€è¦ä»€ä¹ˆ

### éœ€è¦çš„ä¿¡æ¯

1. **Firebase é¡¹ç›®**
   - âœ… Firebase é¡¹ç›® ID
   - âœ… æœåŠ¡è´¦å·ç§é’¥ JSON æ–‡ä»¶

2. **Android åº”ç”¨**
   - âœ… åº”ç”¨åŒ…åï¼š`com.diabeat`
   - âœ… `google-services.json` æ–‡ä»¶

### è·å–æ­¥éª¤

#### 1. åˆ›å»º Firebase é¡¹ç›®

1. è®¿é—® [Firebase Console](https://console.firebase.google.com/)
2. ç‚¹å‡» "æ·»åŠ é¡¹ç›®"
3. å¡«å†™é¡¹ç›®åç§°ï¼ˆä¾‹å¦‚ï¼šDiabEat AIï¼‰
4. å®Œæˆé¡¹ç›®åˆ›å»º

#### 2. è·å–æœåŠ¡è´¦å·å¯†é’¥

1. åœ¨ Firebase Console ä¸­ï¼Œè¿›å…¥ **é¡¹ç›®è®¾ç½®**ï¼ˆâš™ï¸ï¼‰
2. é€‰æ‹© **æœåŠ¡è´¦å·** æ ‡ç­¾
3. ç‚¹å‡» **ç”Ÿæˆæ–°çš„ç§é’¥**
4. ä¸‹è½½ JSON æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼š`diabeat-firebase-adminsdk-xxxxx.json`ï¼‰
5. **ä¿å­˜æ–‡ä»¶åˆ°å®‰å…¨ä½ç½®**

#### 3. æ·»åŠ  Android åº”ç”¨

1. åœ¨ Firebase Console ä¸­ï¼Œç‚¹å‡» **æ·»åŠ åº”ç”¨** â†’ é€‰æ‹© Android
2. å¡«å†™ä¿¡æ¯ï¼š
   - **Android åŒ…å**ï¼š`com.diabeat`
   - **åº”ç”¨æ˜µç§°**ï¼šDiabEat AIï¼ˆå¯é€‰ï¼‰
3. ä¸‹è½½ `google-services.json` æ–‡ä»¶
4. å°†æ–‡ä»¶æ”¾åˆ° `diabeat-android/app/` ç›®å½•

### é…ç½®æ–¹å¼

**æœåŠ¡å™¨ç«¯**ï¼š

```bash
# æ–¹å¼1: ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰
export GOOGLE_APPLICATION_CREDENTIALS="/path/to/diabeat-firebase-adminsdk.json"

# æ–¹å¼2: åœ¨ .env æ–‡ä»¶ä¸­
FIREBASE_CREDENTIALS_PATH=/path/to/diabeat-firebase-adminsdk.json
```

**Android å®¢æˆ·ç«¯**ï¼š

- å°† `google-services.json` æ”¾åˆ° `diabeat-android/app/` ç›®å½•
- å·²é…ç½®åœ¨ `build.gradle.kts` ä¸­

### è¯¦ç»†æ–‡æ¡£
å‚è€ƒï¼š[docs/FCM_SETUP.md](./docs/FCM_SETUP.md)

---

## â˜ï¸ AWS S3 å­˜å‚¨ - éœ€è¦ä»€ä¹ˆ

### éœ€è¦çš„ä¿¡æ¯

1. **AWS è´¦æˆ·**
   - âœ… AWS è´¦æˆ· ID
   - âœ… Access Key ID
   - âœ… Secret Access Key

2. **S3 å­˜å‚¨æ¡¶**
   - âœ… å­˜å‚¨æ¡¶åç§°ï¼ˆå¿…é¡»å…¨å±€å”¯ä¸€ï¼Œä¾‹å¦‚ï¼š`diabeat-ai-images`ï¼‰
   - âœ… AWS åŒºåŸŸï¼ˆä¾‹å¦‚ï¼š`ap-southeast-1`ï¼‰

### è·å–æ­¥éª¤

#### 1. åˆ›å»º AWS è´¦æˆ·

1. è®¿é—® [AWS å®˜ç½‘](https://aws.amazon.com/)
2. æ³¨å†Œæ–°è´¦æˆ·æˆ–ç™»å½•
3. å®Œæˆè´¦æˆ·éªŒè¯

#### 2. åˆ›å»º S3 å­˜å‚¨æ¡¶

1. ç™»å½• [AWS Console](https://console.aws.amazon.com/)
2. è¿›å…¥ **S3** æœåŠ¡
3. ç‚¹å‡» **åˆ›å»ºå­˜å‚¨æ¡¶**
4. é…ç½®ï¼š
   - **å­˜å‚¨æ¡¶åç§°**ï¼š`diabeat-ai-images`ï¼ˆå¿…é¡»å…¨å±€å”¯ä¸€ï¼‰
   - **AWS åŒºåŸŸ**ï¼šé€‰æ‹©åŒºåŸŸï¼ˆä¾‹å¦‚ï¼š`ap-southeast-1` æ–°åŠ å¡ï¼‰
   - **é˜»æ­¢æ‰€æœ‰å…¬å…±è®¿é—®**ï¼šå»ºè®®å¯ç”¨
5. ç‚¹å‡» **åˆ›å»ºå­˜å‚¨æ¡¶**

#### 3. åˆ›å»º IAM ç”¨æˆ·å’Œè®¿é—®å¯†é’¥

1. è¿›å…¥ **IAM** æœåŠ¡
2. ç‚¹å‡» **ç”¨æˆ·** â†’ **åˆ›å»ºç”¨æˆ·**
3. ç”¨æˆ·åï¼š`diabeat-s3-user`
4. é€‰æ‹© **è®¿é—®ç±»å‹**ï¼š**ç¼–ç¨‹è®¿é—®**
5. ç‚¹å‡» **ä¸‹ä¸€æ­¥ï¼šæƒé™**

**åˆ›å»ºç­–ç•¥**ï¼š

1. ç‚¹å‡» **ç›´æ¥é™„åŠ ç°æœ‰ç­–ç•¥** â†’ **åˆ›å»ºç­–ç•¥**
2. é€‰æ‹© **JSON** æ ‡ç­¾
3. è¾“å…¥ç­–ç•¥ï¼ˆæ›¿æ¢ `YOUR_BUCKET_NAME`ï¼‰ï¼š

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:PutObject",
                "s3:GetObject",
                "s3:DeleteObject",
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::YOUR_BUCKET_NAME",
                "arn:aws:s3:::YOUR_BUCKET_NAME/*"
            ]
        }
    ]
}
```

4. ç­–ç•¥åç§°ï¼š`DiabEatS3Policy`
5. ç‚¹å‡» **åˆ›å»ºç­–ç•¥**
6. è¿”å›ç”¨æˆ·åˆ›å»ºï¼Œé™„åŠ åˆšåˆ›å»ºçš„ç­–ç•¥
7. å®Œæˆç”¨æˆ·åˆ›å»º

**è·å–è®¿é—®å¯†é’¥**ï¼š

1. åˆ›å»ºç”¨æˆ·åï¼Œä¿å­˜æ˜¾ç¤ºçš„ï¼š
   - **è®¿é—®å¯†é’¥ ID**ï¼ˆAccess Key IDï¼‰
   - **ç§˜å¯†è®¿é—®å¯†é’¥**ï¼ˆSecret Access Keyï¼‰
2. âš ï¸ **é‡è¦**ï¼šç§˜å¯†è®¿é—®å¯†é’¥åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·å¦¥å–„ä¿å­˜

### é…ç½®æ–¹å¼

**åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®**ï¼š

```env
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=ap-southeast-1
AWS_S3_BUCKET=diabeat-ai-images
S3_URL=https://diabeat-ai-images.s3.ap-southeast-1.amazonaws.com
```

### è¯¦ç»†æ–‡æ¡£
å‚è€ƒï¼š[docs/AWS_S3_SETUP.md](./docs/AWS_S3_SETUP.md)

---

## ğŸ“‹ é…ç½®æ£€æŸ¥æ¸…å•

### å¿…éœ€é…ç½® âœ…

- [ ] `DATABASE_URL` - æ•°æ®åº“è¿æ¥
- [ ] `SECRET_KEY` - JWT å¯†é’¥ï¼ˆä¿®æ”¹é»˜è®¤å€¼ï¼‰
- [ ] `OPENAI_API_KEY` æˆ– `DASHSCOPE_API_KEY` - AI API å¯†é’¥

### å¯é€‰é…ç½® âš™ï¸

- [ ] `DASHSCOPE_API_KEY` - é€šä¹‰åƒé—®ï¼ˆä» rock-server è·å–ï¼‰
- [ ] `FIREBASE_CREDENTIALS_PATH` - FCM æ¨é€
- [ ] `AWS_ACCESS_KEY_ID` ç­‰ - S3 å­˜å‚¨

---

## ğŸš€ å¿«é€Ÿé…ç½®å‘½ä»¤

### é€šä¹‰åƒé—®

```bash
# ä» rock-server è·å–
export DASHSCOPE_API_KEY=$(grep DASHSCOPE_API_KEY /Users/conalin/rock-server/config/.env.stage | cut -d'=' -f2)

# æˆ–æ‰‹åŠ¨è®¾ç½®
export DASHSCOPE_API_KEY="your-key-here"
```

### FCM

```bash
# è®¾ç½® Firebase å‡­è¯è·¯å¾„
export GOOGLE_APPLICATION_CREDENTIALS="/path/to/diabeat-firebase-adminsdk.json"
```

### AWS S3

```bash
# è®¾ç½® AWS å‡­è¯
export AWS_ACCESS_KEY_ID="your-access-key-id"
export AWS_SECRET_ACCESS_KEY="your-secret-access-key"
export AWS_REGION="ap-southeast-1"
export AWS_S3_BUCKET="diabeat-ai-images"
export S3_URL="https://diabeat-ai-images.s3.ap-southeast-1.amazonaws.com"
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´é…ç½®æŒ‡å—](./docs/CONFIGURATION_GUIDE.md)
- [å¿«é€Ÿå¼€å§‹](./docs/QUICK_START.md)
- [FCM è¯¦ç»†é…ç½®](./docs/FCM_SETUP.md)
- [AWS S3 è¯¦ç»†é…ç½®](./docs/AWS_S3_SETUP.md)

---

**æœ€åæ›´æ–°**ï¼š2025-11-06

