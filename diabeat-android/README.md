# ğŸ Diabeat Android - æ™ºèƒ½ç³–å°¿ç—…ç®¡ç†APP

<div align="center">

![Platform](https://img.shields.io/badge/Platform-Android-green.svg)
![Kotlin](https://img.shields.io/badge/Kotlin-1.9.0-blue.svg)
![Compose](https://img.shields.io/badge/Jetpack%20Compose-1.5.0-brightgreen.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

ä¸€æ¬¾åŸºäºAIçš„æ™ºèƒ½ç³–å°¿ç—…ç®¡ç†Androidåº”ç”¨

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [æ¶æ„](#-æ¶æ„) â€¢ [æˆªå›¾](#-æˆªå›¾)

</div>

---

## ğŸ“± åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ¤– AIé£Ÿç‰©è¯†åˆ«**
  - åŸºäºé€šä¹‰åƒé—®è§†è§‰æ¨¡å‹ï¼ˆqwen3-vl-plusï¼‰
  - æ‹ç…§å³å¯è¯†åˆ«é£Ÿç‰©ç§ç±»ã€é‡é‡ã€çƒ¹é¥ªæ–¹å¼
  - è¯†åˆ«å‡†ç¡®ç‡é«˜è¾¾93%
  - æ”¯æŒæ··åˆèœå“è¯†åˆ«

- **ğŸ“Š è¥å…»ç®¡ç†**
  - å®æ—¶è¥å…»æ‘„å…¥ç»Ÿè®¡ï¼ˆçƒ­é‡ã€ç¢³æ°´ã€è›‹ç™½è´¨ã€è„‚è‚ªï¼‰
  - åŸºäºMifflin-St Jeorå…¬å¼çš„æ¯æ—¥æ¨èè®¡ç®—
  - æ ¹æ®ç³–å°¿ç—…ç±»å‹ï¼ˆ1å‹/2å‹/å¦Šå¨ æœŸ/å‰æœŸï¼‰ä¸ªæ€§åŒ–æ¨è
  - çœŸå®é£Ÿç‰©è¥å…»æ•°æ®åº“ï¼ˆ36+ç§å¸¸è§é£Ÿç‰©ï¼‰

- **ğŸ©¸ è¡€ç³–é¢„æµ‹**
  - å¤šå› ç´ è¡€ç³–é¢„æµ‹ç®—æ³•
  - è€ƒè™‘ç¢³æ°´æ‘„å…¥ã€è¿åŠ¨ã€æ°´åˆ†ã€æ—¶é—´è¡°å‡
  - é¤åè¡€ç³–è¶‹åŠ¿é¢„æµ‹
  - é£é™©è¯„ä¼°å’Œå»ºè®®

- **ğŸ’Š ç”¨è¯ç®¡ç†**
  - èƒ°å²›ç´ å‰‚é‡è®°å½•
  - å£æœè¯ç‰©ç®¡ç†
  - æ™ºèƒ½ç”¨è¯æé†’
  - ç”¨è¯å†å²è¿½è¸ª

- **ğŸƒ å¥åº·è¿½è¸ª**
  - è¿åŠ¨è®°å½•ï¼ˆç±»å‹ã€æ—¶é•¿ã€å¼ºåº¦ã€æ¶ˆè€—çƒ­é‡ï¼‰
  - é¥®æ°´è¿½è¸ª
  - æ¯æ—¥å¥åº·æ•°æ®æ±‡æ€»

- **ğŸ”” æ™ºèƒ½æé†’**
  - åŸºäºç”¨æˆ·ä¹ æƒ¯çš„ç”¨é¤æé†’
  - ç”¨è¯æ—¶é—´æ™ºèƒ½é¢„æµ‹
  - "å°‘åƒå¤šé¤"å¥åº·å»ºè®®

### ğŸ¨ UI/UXç‰¹è‰²

- **Material3 Design**
  - æ¸å˜èƒŒæ™¯å’Œç»ç’ƒæ€æ•ˆæœ
  - æµç•…çš„åŠ¨ç”»è¿‡æ¸¡
  - å“åº”å¼å¸ƒå±€

- **æ— ç¼è®¤è¯**
  - åŸºäºdevice_idçš„è‡ªåŠ¨æ³¨å†Œ
  - æ— éœ€è¾“å…¥é‚®ç®±å¯†ç 
  - JWT Tokenå®‰å…¨æœºåˆ¶

- **å¤šè¯­è¨€æ”¯æŒ**
  - ä¸­æ–‡/English
  - åŠ¨æ€åˆ‡æ¢ä¸é‡å¯

- **ç¾è§‚çš„æ•°æ®å¯è§†åŒ–**
  - ç¯å½¢è¿›åº¦æ¡
  - å½©è‰²å›¾è¡¨
  - ç›´è§‚çš„å¡ç‰‡å¸ƒå±€

---

## ğŸ›  æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

- **è¯­è¨€**: Kotlin 1.9.0
- **UI**: Jetpack Compose + Material3
- **æ¶æ„**: MVVM + Clean Architecture
- **å¼‚æ­¥**: Coroutines + Flow

### ç½‘ç»œä¸æ•°æ®

- **ç½‘ç»œè¯·æ±‚**: Retrofit + OkHttp
- **åºåˆ—åŒ–**: Kotlinx Serialization
- **æœ¬åœ°å­˜å‚¨**: SharedPreferences
- **å›¾ç‰‡åŠ è½½**: Coil

### ç›¸æœºä¸åª’ä½“

- **ç›¸æœº**: CameraX
- **å›¾ç‰‡é€‰æ‹©å™¨**: ActivityResult API

### ä¾èµ–æ³¨å…¥

- **æ‰‹åŠ¨DI**: ViewModel Factoryæ¨¡å¼

### å…¶ä»–

- **æ—¥æœŸæ—¶é—´**: Java 8+ Time API
- **æµ‹è¯•**: JUnit + Mockito
- **æ„å»º**: Gradle Kotlin DSL

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Android Studio Hedgehog | 2023.1.1+
- JDK 11+
- Android SDK 24+ï¼ˆæœ€ä½ï¼‰/ 34+ï¼ˆç›®æ ‡ï¼‰
- Gradle 8.0+

### å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/linqixin1003/Diabeat-Android.git
cd Diabeat-Android
```

### é…ç½®

1. **APIé…ç½®**

ç¼–è¾‘ `app/src/main/res/values/config.xml`:

```xml
<resources>
    <string name="base_url">http://YOUR_SERVER_IP:8000</string>
</resources>
```

2. **Firebaseé…ç½®**ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€æ¨é€é€šçŸ¥ï¼Œæ·»åŠ  `google-services.json` åˆ° `app/` ç›®å½•

### ç¼–è¯‘è¿è¡Œ

```bash
# ç¼–è¯‘Debugç‰ˆæœ¬
./gradlew assembleDebug

# å®‰è£…åˆ°è®¾å¤‡
./gradlew installDebug

# æˆ–ç›´æ¥åœ¨Android Studioä¸­ç‚¹å‡»è¿è¡Œ
```

---

## ğŸ— æ¶æ„

### é¡¹ç›®ç»“æ„

```
app/src/main/kotlin/com/diabeat/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ model/              # æ•°æ®æ¨¡å‹
â”œâ”€â”€ network/
â”‚   â”œâ”€â”€ ApiService.kt       # Retrofitæ¥å£å®šä¹‰
â”‚   â””â”€â”€ RetrofitClient.kt   # ç½‘ç»œé…ç½®
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ home/              # é¦–é¡µï¼ˆè¥å…»ç»Ÿè®¡ï¼‰
â”‚   â”œâ”€â”€ camera/            # æ‹ç…§è¯†åˆ«
â”‚   â”œâ”€â”€ recognition/       # è¯†åˆ«ç»“æœ
â”‚   â”œâ”€â”€ dialog/            # å¯¹è¯æ¡†ï¼ˆè¿åŠ¨/é¥®æ°´/ç”¨è¯ï¼‰
â”‚   â”œâ”€â”€ mine/              # ä¸ªäººä¸­å¿ƒ
â”‚   â””â”€â”€ theme/             # ä¸»é¢˜é…ç½®
â”œâ”€â”€ viewmodel/             # ViewModelå±‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ TokenManager.kt    # è®¤è¯ç®¡ç†
â”‚   â”œâ”€â”€ DeviceIdUtil.kt    # è®¾å¤‡IDç®¡ç†
â”‚   â””â”€â”€ ImageUtil.kt       # å›¾ç‰‡å¤„ç†
â””â”€â”€ service/
    â””â”€â”€ FCMService.kt      # æ¨é€æœåŠ¡
```

### æ•°æ®æµ

```
UI Layer (Compose)
    â†“
ViewModel (StateFlow)
    â†“
Repository (Retrofit)
    â†“
Network (OkHttp)
    â†“
Backend API
```

### è®¤è¯æµç¨‹

```
1. APPå¯åŠ¨ â†’ DeviceIdUtilç”Ÿæˆ/è¯»å–è®¾å¤‡ID
2. TokenManager.ensureAuthenticated()
   â”œâ”€ æ£€æŸ¥æœ¬åœ°token
   â”œâ”€ tokenæœ‰æ•ˆ â†’ ç›´æ¥ä½¿ç”¨
   â””â”€ tokenæ— æ•ˆ â†’ è°ƒç”¨/api/users/device-auth
       â””â”€ åç«¯æ£€æŸ¥device_id
           â”œâ”€ å­˜åœ¨ â†’ è¿”å›ç°æœ‰ç”¨æˆ·token
           â””â”€ ä¸å­˜åœ¨ â†’ åˆ›å»ºæ–°ç”¨æˆ· â†’ è¿”å›token
3. ä¿å­˜tokenå’ŒuserIdåˆ°SharedPreferences
4. æ‰€æœ‰APIè¯·æ±‚è‡ªåŠ¨æ·»åŠ Authorization header
```

---

## ğŸ“¸ æˆªå›¾

<div align="center">

| é¦–é¡µ | è¯†åˆ«ç»“æœ | ä¸ªäººä¸­å¿ƒ |
|:---:|:---:|:---:|
| ![é¦–é¡µ](docs/screenshots/home.png) | ![è¯†åˆ«](docs/screenshots/recognition.png) | ![ä¸ªäºº](docs/screenshots/mine.png) |

| æ‹ç…§ | è®°å½• | è®¾ç½® |
|:---:|:---:|:---:|
| ![æ‹ç…§](docs/screenshots/camera.png) | ![è®°å½•](docs/screenshots/records.png) | ![è®¾ç½®](docs/screenshots/settings.png) |

</div>

---

## ğŸ“¦ ä¸»è¦ä¾èµ–

```kotlin
dependencies {
    // Jetpack Compose
    implementation("androidx.compose.ui:ui:1.5.4")
    implementation("androidx.compose.material3:material3:1.1.2")
    
    // Lifecycle & ViewModel
    implementation("androidx.lifecycle:lifecycle-viewmodel-compose:2.6.2")
    
    // Navigation
    implementation("androidx.navigation:navigation-compose:2.7.5")
    
    // Retrofit
    implementation("com.squareup.retrofit2:retrofit:2.9.0")
    implementation("com.jakewharton.retrofit:retrofit2-kotlinx-serialization-converter:1.0.0")
    
    // Kotlinx Serialization
    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:1.6.0")
    
    // Coroutines
    implementation("org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3")
    
    // CameraX
    implementation("androidx.camera:camera-camera2:1.3.0")
    implementation("androidx.camera:camera-lifecycle:1.3.0")
    implementation("androidx.camera:camera-view:1.3.0")
    
    // Coil (Image Loading)
    implementation("io.coil-kt:coil-compose:2.4.0")
}
```

---

## ğŸ”’ å®‰å…¨æ€§

- âœ… JWT Tokenè®¤è¯
- âœ… HTTPSåŠ å¯†é€šä¿¡ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- âœ… è®¾å¤‡IDåŠ å¯†å­˜å‚¨
- âœ… ç½‘ç»œå®‰å…¨é…ç½®ï¼ˆNetworkSecurityConfigï¼‰
- âœ… æ•°æ®æœ¬åœ°åŠ å¯†

---

## ğŸ“Š æ€§èƒ½

- **å¯åŠ¨æ—¶é—´**: <2ç§’
- **AIè¯†åˆ«é€Ÿåº¦**: 9-12ç§’
- **å†…å­˜å ç”¨**: ~100MB
- **APKå¤§å°**: ~15MB

---

## ğŸ¤ ç›¸å…³é¡¹ç›®

- [Diabeat-Server](https://github.com/linqixin1003/diabeat-server) - åç«¯APIæœåŠ¡ï¼ˆFastAPI + PostgreSQLï¼‰

---

## ğŸ“„ å¼€å‘æ–‡æ¡£

- [å¿«é€Ÿè¿è¡ŒæŒ‡å—](å¿«é€Ÿè¿è¡ŒæŒ‡å—.md)
- [æ„å»ºAPKæŒ‡å—](æ„å»ºAPKæŒ‡å—.md)
- [ç›¸æœºæƒé™ä¿®å¤è¯´æ˜](ç›¸æœºæƒé™ä¿®å¤è¯´æ˜.md)
- [UIä¼˜åŒ–å®Œæˆè¯´æ˜](UIä¼˜åŒ–å®Œæˆè¯´æ˜.md)

---

## ğŸ› é—®é¢˜åé¦ˆ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æäº¤Issueï¼š
https://github.com/linqixin1003/Diabeat-Android/issues

---

## ğŸ“ License

MIT License

Copyright (c) 2024 Diabeat

---

## ğŸ‘¥ è´¡çŒ®è€…

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼

---

## ğŸŒŸ Star History

[![Star History Chart](https://api.star-history.com/svg?repos=linqixin1003/Diabeat-Android&type=Date)](https://star-history.com/#linqixin1003/Diabeat-Android&Date)

---

<div align="center">

**[â¬† å›åˆ°é¡¶éƒ¨](#-diabeat-android---æ™ºèƒ½ç³–å°¿ç—…ç®¡ç†app)**

Made with â¤ï¸ by Diabeat Team

</div>
